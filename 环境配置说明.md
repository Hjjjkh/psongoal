# ç¯å¢ƒé…ç½®è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜ Monorepo ç»“æ„ä¸‹çš„ç¯å¢ƒå˜é‡é…ç½®ï¼Œç¡®ä¿æœ¬åœ°å¼€å‘å’Œ Zeabur éƒ¨ç½²æ­£å¸¸ã€‚

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
psongoal/
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ web/              # ç½‘é¡µç‰ˆï¼ˆç°æœ‰é¡¹ç›®ï¼‰
â”‚       â”œâ”€â”€ .env.local    # æœ¬åœ°ç¯å¢ƒå˜é‡ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”‚       â””â”€â”€ ...
â”œâ”€â”€ package.json          # æ ¹ package.jsonï¼ˆworkspace é…ç½®ï¼‰
â””â”€â”€ pnpm-workspace.yaml   # pnpm workspace é…ç½®
```

---

## ğŸ”§ æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®

### 1. åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

åœ¨ `packages/web/` ç›®å½•ä¸‹åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here

# ç½‘ç«™ URLï¼ˆç”¨äº Auth å›è°ƒï¼‰
# æœ¬åœ°å¼€å‘ä½¿ç”¨ï¼šhttp://localhost:3000
# ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼šhttps://psongoal.zeabur.app
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### 2. è·å– Supabase é…ç½®

1. ç™»å½• [Supabase Dashboard](https://app.supabase.com)
2. é€‰æ‹©ä½ çš„é¡¹ç›®
3. è¿›å…¥ **Settings** > **API**
4. å¤åˆ¶ï¼š
   - **Project URL** â†’ `NEXT_PUBLIC_SUPABASE_URL`
   - **anon public** key â†’ `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### 3. éªŒè¯é…ç½®

```bash
# ä»æ ¹ç›®å½•è¿è¡Œ
pnpm dev:web

# æˆ–ä» packages/web ç›®å½•è¿è¡Œ
cd packages/web
pnpm dev
```

è®¿é—® `http://localhost:3000`ï¼Œç¡®è®¤åº”ç”¨æ­£å¸¸è¿è¡Œã€‚

---

## ğŸš€ Zeabur éƒ¨ç½²é…ç½®

### 1. è¿æ¥ GitHub ä»“åº“

1. ç™»å½• [Zeabur Dashboard](https://zeabur.com)
2. ç‚¹å‡» **New Project**
3. é€‰æ‹© **Import from GitHub**
4. é€‰æ‹©ä½ çš„ä»“åº“

### 2. é…ç½®é¡¹ç›®è®¾ç½®

#### æ ¹ç›®å½•è®¾ç½®

åœ¨ Zeabur é¡¹ç›®è®¾ç½®ä¸­ï¼Œè®¾ç½®ï¼š
- **Root Directory**: `packages/web`

#### ç¯å¢ƒå˜é‡è®¾ç½®

åœ¨ Zeabur é¡¹ç›®è®¾ç½®ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
NEXT_PUBLIC_SITE_URL=https://psongoal.zeabur.app
```

**é‡è¦**ï¼š`NEXT_PUBLIC_SITE_URL` å¿…é¡»è®¾ç½®ä¸ºä½ çš„çº¿ä¸ŠåŸŸåï¼Œç”¨äº Supabase Auth é‚®ä»¶éªŒè¯é“¾æ¥ã€‚

### 3. æ„å»ºé…ç½®

Zeabur ä¼šè‡ªåŠ¨æ£€æµ‹ Next.js é¡¹ç›®ï¼Œä½¿ç”¨ä»¥ä¸‹æ„å»ºå‘½ä»¤ï¼š

```bash
# Zeabur ä¼šè‡ªåŠ¨è¿è¡Œ
cd packages/web
pnpm install
pnpm build
```

### 4. éƒ¨ç½²éªŒè¯

1. ç­‰å¾…æ„å»ºå®Œæˆ
2. è®¿é—® Zeabur æä¾›çš„ URL
3. ç¡®è®¤åº”ç”¨æ­£å¸¸è¿è¡Œ

---

## ğŸ“ ç¯å¢ƒå˜é‡è¯´æ˜

### `NEXT_PUBLIC_SUPABASE_URL`

- **ç±»å‹**: å­—ç¬¦ä¸²
- **è¯´æ˜**: Supabase é¡¹ç›® URL
- **æ ¼å¼**: `https://xxxxx.supabase.co`
- **å¿…éœ€**: âœ… æ˜¯

### `NEXT_PUBLIC_SUPABASE_ANON_KEY`

- **ç±»å‹**: å­—ç¬¦ä¸²
- **è¯´æ˜**: Supabase åŒ¿åå…¬é’¥ï¼ˆç”¨äºå®¢æˆ·ç«¯è®¿é—®ï¼‰
- **æ ¼å¼**: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`
- **å¿…éœ€**: âœ… æ˜¯

### `NEXT_PUBLIC_SITE_URL`

- **ç±»å‹**: å­—ç¬¦ä¸²
- **è¯´æ˜**: ç½‘ç«™ URLï¼ˆç”¨äº Supabase Auth é‚®ä»¶éªŒè¯å›è°ƒï¼‰
- **æœ¬åœ°å¼€å‘**: `http://localhost:3000`
- **ç”Ÿäº§ç¯å¢ƒ**: `https://psongoal.zeabur.app`
- **å¿…éœ€**: âš ï¸ æ¨èï¼ˆä¸è®¾ç½®ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼‰

---

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ä¸è¦æäº¤ `.env.local` åˆ° Git**
   - å·²é…ç½®åœ¨ `.gitignore` ä¸­
   - åŒ…å«æ•æ„Ÿä¿¡æ¯

2. **ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†**
   - æœ¬åœ°å¼€å‘ï¼šä½¿ç”¨ `.env.local`
   - ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ Zeabur ç¯å¢ƒå˜é‡é…ç½®

3. **å¯†é’¥è½®æ¢**
   - å®šæœŸæ£€æŸ¥ Supabase å¯†é’¥
   - å¦‚æœæ³„éœ²ï¼Œç«‹å³åœ¨ Supabase Dashboard ä¸­é‡ç½®

---

## ğŸ› å¸¸è§é—®é¢˜

### 1. æœ¬åœ°å¼€å‘æ— æ³•è¿æ¥ Supabase

**é—®é¢˜**: åº”ç”¨æ— æ³•è¿æ¥åˆ° Supabase

**è§£å†³**:
1. æ£€æŸ¥ `.env.local` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥ Supabase é¡¹ç›®æ˜¯å¦æ­£å¸¸è¿è¡Œ
4. é‡å¯å¼€å‘æœåŠ¡å™¨

### 2. Zeabur éƒ¨ç½²å¤±è´¥

**é—®é¢˜**: Zeabur æ„å»ºå¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥æ ¹ç›®å½•è®¾ç½®æ˜¯å¦ä¸º `packages/web`
2. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®
3. æŸ¥çœ‹ Zeabur æ„å»ºæ—¥å¿—
4. ç¡®è®¤ `package.json` ä¸­çš„è„šæœ¬æ­£ç¡®

### 3. ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ

**é—®é¢˜**: ç¯å¢ƒå˜é‡é…ç½®äº†ä½†æœªç”Ÿæ•ˆ

**è§£å†³**:
1. ç¡®è®¤å˜é‡åä»¥ `NEXT_PUBLIC_` å¼€å¤´ï¼ˆå®¢æˆ·ç«¯å˜é‡ï¼‰
2. é‡å¯å¼€å‘æœåŠ¡å™¨
3. æ¸…é™¤ `.next` ç¼“å­˜ï¼š`rm -rf .next`
4. é‡æ–°æ„å»ºï¼š`pnpm build`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Next.js ç¯å¢ƒå˜é‡æ–‡æ¡£](https://nextjs.org/docs/basic-features/environment-variables)
- [Supabase æ–‡æ¡£](https://supabase.com/docs)
- [Zeabur æ–‡æ¡£](https://zeabur.com/docs)

---

**æœ€åæ›´æ–°**: 2024-12-20

