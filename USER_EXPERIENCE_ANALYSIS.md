# 用户体验深度分析报告

## 流程1：新用户注册和首次使用

### 用户操作流程
1. 访问首页 `/` → 自动跳转到 `/today`
2. 未登录 → middleware 重定向到 `/auth/login?redirectedFrom=/today`
3. 注册新账户
4. 登录成功 → 跳转到 `/today`

### 发现的问题

#### 问题1.1：新用户首次登录后没有引导
- **问题描述**：新用户登录后直接进入 `/today`，但没有任何目标，显示"当前目标已完成"，用户不知道下一步该做什么
- **影响**：新用户困惑，不知道如何开始
- **优先级**：高
- **建议**：
  - 检测到用户没有任何目标时，显示引导提示
  - 提供"创建第一个目标"的明确按钮
  - 或者自动跳转到 `/goals` 页面

#### 问题1.2：注册成功后的提示不够明确
- **问题描述**：注册成功后显示"注册成功！请检查邮箱验证链接"，但用户可能不知道是否需要验证才能使用
- **影响**：用户可能尝试登录但失败（如果邮箱验证是必需的）
- **优先级**：中
- **建议**：明确告知用户是否需要验证邮箱，或者提供"已验证，可以直接登录"的提示

## 流程2：创建目标

### 用户操作流程
1. 进入 `/goals` 页面
2. 点击"新建目标"
3. 填写目标信息（名称、类别、日期）
4. 选择是否使用模板
5. 提交创建

### 发现的问题

#### 问题2.1：创建目标后没有明确提示下一步
- **问题描述**：创建目标成功后，只显示 Toast，用户不知道需要"设置当前目标"才能开始执行
- **影响**：用户创建了目标但不知道如何开始执行
- **优先级**：高
- **建议**：
  - 创建成功后，提示"目标已创建，请点击'设为当前目标'开始执行"
  - 或者在创建成功后，自动询问是否设置为当前目标

#### 问题2.2：模板创建时，用户可能不知道可以修改字段
- **问题描述**：虽然模板字段可以修改，但界面上没有明确提示
- **影响**：用户可能认为模板是固定的，不敢修改
- **优先级**：中
- **建议**：在模板预览区域添加提示："模板提供默认值，你可以修改任何字段"

#### 问题2.3：创建目标时，如果当前已有目标在执行，创建会失败但没有明确说明原因
- **问题描述**：如果用户当前有目标在执行，创建新目标会返回 409，但错误提示可能不够明确
- **影响**：用户不知道为什么不能创建新目标
- **优先级**：中
- **建议**：409 错误提示应该明确说明："当前目标正在进行中，请先完成或放弃当前目标"

#### 问题2.4：空状态提示不够友好
- **问题描述**：没有目标时，只显示"还没有目标，创建一个开始吧"，没有引导
- **影响**：新用户可能不知道如何使用模板
- **优先级**：低
- **建议**：在空状态时，突出显示模板创建的优势

## 流程3：设置当前目标

### 用户操作流程
1. 在 `/goals` 页面，点击"设为当前目标"
2. 系统检查当前是否有目标在执行
3. 如果没有，设置成功并跳转到 `/today`

### 发现的问题

#### 问题3.1：设置当前目标后，用户不知道下一步
- **问题描述**：设置成功后跳转到 `/today`，但如果目标没有行动，用户会看到"系统状态异常"
- **影响**：用户困惑
- **优先级**：高
- **建议**：在设置当前目标时，检查目标是否有行动，如果没有，提示用户先创建阶段和行动

#### 问题3.2：如果当前目标正在执行，设置新目标会失败，但用户可能不知道原因
- **问题描述**：409 错误提示可能不够明确
- **影响**：用户不知道为什么不能切换目标
- **优先级**：中
- **建议**：错误提示应该明确说明："当前目标正在进行中，请先完成或放弃当前目标"

## 流程4：执行今日行动

### 用户操作流程
1. 进入 `/today` 页面
2. 看到当前行动
3. 选择"完成"或"未完成"
4. 如果完成，填写难度和精力
5. 提交后跳转到其他页面

### 发现的问题

#### 问题4.1：完成行动后跳转到统计页面，但用户可能想继续查看目标进度
- **问题描述**：完成行动后自动跳转到 `/dashboard`，但用户可能想看看目标列表或今日页面
- **影响**：用户体验不够灵活
- **优先级**：中
- **建议**：可以考虑跳转到 `/goals` 页面，让用户查看目标进度，或者提供选择

#### 问题4.2：标记未完成后，页面仍显示同一行动，用户可能不知道明天会怎样
- **问题描述**：标记未完成后，用户看到 Toast 提示"明天可以继续尝试完成此行动"，但页面仍显示同一行动
- **影响**：用户可能困惑，不知道是否应该离开页面
- **优先级**：低
- **建议**：标记未完成后，可以考虑跳转到统计页面，或者显示更明确的状态提示

#### 问题4.3：如果行动已完成但系统状态异常，自动修复可能让用户困惑
- **问题描述**：系统会自动修复状态异常，但用户可能不知道为什么页面突然变了
- **影响**：用户可能感到困惑
- **优先级**：低
- **建议**：这种情况应该很少发生，如果发生，可以显示一个简短的提示

#### 问题4.4：完成行动时，如果目标已完成，跳转到 `/goals`，但用户可能想查看统计
- **问题描述**：目标完成后跳转到 `/goals`，但用户可能想先看看完成统计
- **影响**：用户体验不够灵活
- **优先级**：低
- **建议**：可以考虑跳转到 `/dashboard`，或者提供选择

## 流程5：查看统计

### 用户操作流程
1. 进入 `/dashboard` 页面
2. 查看目标进度、连续完成天数、趋势图等

### 发现的问题

#### 问题5.1：统计页面没有"开始今日行动"的快捷入口
- **问题描述**：用户在统计页面查看数据后，如果想开始今日行动，需要点击"今日"按钮
- **影响**：操作不够便捷
- **优先级**：低
- **建议**：如果有当前行动，在统计页面顶部显示"开始今日行动"的醒目按钮

#### 问题5.2：如果用户没有完成任何行动，统计页面可能显示空数据
- **问题描述**：新用户或没有完成行动的用户，统计页面可能显示很多"0"或空数据
- **影响**：用户体验不够友好
- **优先级**：低
- **建议**：空状态时显示鼓励性提示，引导用户开始执行

## 流程6：边界情况和错误处理

### 发现的问题

#### 问题6.1：网络错误时的提示可能不够友好
- **问题描述**：网络错误时显示"网络连接失败"，但用户可能不知道如何重试
- **影响**：用户体验不佳
- **优先级**：中
- **建议**：网络错误时，提供"重试"按钮

#### 问题6.2：并发请求的处理可能让用户困惑
- **问题描述**：如果用户快速点击按钮，可能看到"操作被系统拒绝"的提示
- **影响**：用户可能不知道为什么被拒绝
- **优先级**：低
- **建议**：409 错误提示已经优化，应该足够友好

#### 问题6.3：如果用户刷新页面，可能丢失未保存的数据
- **问题描述**：在创建目标或行动的对话框中，如果用户刷新页面，输入的数据会丢失
- **影响**：用户体验不佳
- **优先级**：低
- **建议**：可以考虑使用 localStorage 保存草稿（但这是可选功能）

## 总结

### 高优先级问题
1. 新用户首次登录后没有引导
2. 创建目标后没有明确提示下一步
3. 设置当前目标后，如果目标没有行动，用户会看到"系统状态异常"

### 中优先级问题
1. 注册成功后的提示不够明确
2. 模板创建时，用户可能不知道可以修改字段
3. 创建目标时，如果当前已有目标在执行，错误提示不够明确
4. 完成行动后跳转逻辑可能不够灵活
5. 网络错误时的提示可能不够友好

### 低优先级问题
1. 空状态提示不够友好
2. 标记未完成后的页面状态
3. 完成行动时的跳转逻辑
4. 统计页面的快捷入口
5. 空数据状态的显示

