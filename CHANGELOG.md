# 更新日志

## v2.0.0 - 2024年最新更新

### 🎉 新增功能

#### 1. 独立专注空间 (`/focus`)
- **功能**: 独立的专注工作空间，用户可以随时进入
- **特点**:
  - 显示今日主线 Action（未完成时）
  - 显示代办任务列表
  - 可选择任务开始专注（可选）
  - 可直接标记完成（不强制使用计时器）
  - 专注计时器可选使用
- **设计原则**: 专注不等于完成，不自动推进状态

#### 2. 代办事项系统
- **定位**: 记忆容器（认知降级版本），不是任务系统
- **特点**:
  - 默认折叠，弱存在感
  - 完成=消失，不保留已处理状态
  - 7天后自动清理
  - 不参与统计，不影响主线进度
- **功能**: 快速输入、忽略、删除

#### 3. 专注功能（番茄钟）
- **定位**: 执行放大器，从属于 Action/代办
- **特点**:
  - 入口从属于任务（不能单独启动）
  - 专注不等于完成，不自动推进状态
  - 统计从属于任务，不独立叙事
- **功能**: 25分钟番茄钟、暂停/继续、结束

#### 4. 模板系统
- **行动模板**: 个人模板库，用于快速创建行动
- **目标模板**: 系统模板（健康、学习、项目）+ 个人模板
- **功能**: 创建、编辑、删除、初始化默认模板

#### 5. 提醒系统
- 每日提醒（浏览器通知）
- 可设置提醒时间
- 完成庆祝通知

#### 6. 数据管理
- 数据导出（JSON 格式）
- 数据导入（JSON 格式）
- 包含所有用户数据

#### 7. PWA 支持
- 渐进式 Web 应用
- 离线支持
- 可安装到设备

### 🔧 优化改进

#### 用户体验
- 优化目标模板显示（类别标签、行动预览）
- 优化初始化对话框（预览卡片）
- 代办事项默认折叠，弱存在感
- 专注空间独立页面，灵活使用

#### 代码质量
- 修复 React Hooks 依赖问题
- 优化计时器逻辑
- 改进错误处理

### 📝 数据库迁移

需要执行以下迁移文件（按顺序）：
1. `supabase/migration_add_action_templates.sql`
2. `supabase/migration_add_goal_templates.sql`
3. `supabase/migration_add_todos.sql`
4. `supabase/migration_add_focus_sessions.sql`

### 🎯 设计原则

#### 代办事项
- 认知降级：使用 `checked` 而非 `completed`
- 位置靠后：只在主线完成后显示
- 不参与统计：无完成数量、完成率、图表
- 自动清理：7天后静默清理

#### 专注功能
- 从属于任务：不能单独启动
- 专注≠完成：不自动推进状态
- 统计从属：不独立叙事

### 📚 文档更新

- 更新 README.md，添加新功能说明
- 创建 CHANGELOG.md 记录更新历史
- 创建设计原则文档（TODOS_DESIGN_PRINCIPLES.md）

## v1.0.0 - 初始版本

### 核心功能
- 每日唯一行动机制
- 目标-阶段-行动三级结构
- 复盘看板
- 用户认证

