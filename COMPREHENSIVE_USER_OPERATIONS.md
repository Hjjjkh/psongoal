# 用户所有可能操作全面清单

## 一、认证相关操作

### 1.1 登录页面 (`/auth/login`)
- **操作1**: 输入邮箱
  - 输入有效邮箱格式
  - 输入无效邮箱格式（前端验证）
  - 输入空值
- **操作2**: 输入密码
  - 输入有效密码（登录时）
  - 输入无效密码（登录时）
  - 输入符合要求的密码（注册时：至少8位，包含字母和数字）
  - 输入不符合要求的密码（注册时）
  - 输入空值
- **操作3**: 切换登录/注册模式
  - 点击"没有账户？注册"按钮
  - 点击"已有账户？登录"按钮
- **操作4**: 提交表单
  - 登录：提交有效邮箱和密码
  - 登录：提交无效邮箱或密码
  - 登录：提交空值
  - 注册：提交符合要求的邮箱和密码
  - 注册：提交不符合要求的密码
  - 注册：提交已存在的邮箱
  - 注册：提交无效邮箱格式
- **操作5**: 处理注册结果
  - 需要邮箱验证：显示验证提示
  - 不需要验证：自动跳转
  - 注册失败：显示错误提示

## 二、首页操作 (`/`)

### 2.1 页面访问
- **操作1**: 已登录用户访问首页
  - 有当前行动且今天未完成
  - 有当前行动且今天已完成
  - 无当前行动（目标已完成或未设置）
  - 无任何目标（新用户）

### 2.2 导航操作
- **操作2**: 点击"去完成今日行动"按钮
  - 跳转到 `/today`
- **操作3**: 点击"查看复盘"按钮
  - 跳转到 `/dashboard`
- **操作4**: 点击"目标规划"按钮
  - 跳转到 `/goals`
- **操作5**: 点击"创建新目标"按钮（目标已完成时）
  - 跳转到 `/goals`
- **操作6**: 点击"查看完成统计"按钮（目标已完成时）
  - 跳转到 `/dashboard`
- **操作7**: 点击"去规划目标"按钮（无目标时）
  - 跳转到 `/goals`
- **操作8**: 点击快速导航卡片
  - 点击"今日行动"卡片 → 跳转到 `/today`
  - 点击"目标规划"卡片 → 跳转到 `/goals`
  - 点击"复盘看板"卡片 → 跳转到 `/dashboard`

## 三、目标规划页面操作 (`/goals`)

### 3.1 页面访问
- **操作1**: 访问目标规划页面
  - 有目标列表
  - 无目标列表（新用户）

### 3.2 目标列表操作
- **操作2**: 展开/折叠目标
  - 点击目标标题旁的展开/折叠按钮
  - 点击目标卡片区域
- **操作3**: 展开/折叠阶段
  - 点击阶段标题旁的展开/折叠按钮
- **操作4**: 查看目标详情
  - 查看目标名称、类别、日期范围
  - 查看目标状态（进行中/已完成）
  - 查看阶段列表
  - 查看行动列表

### 3.3 创建目标操作
- **操作5**: 打开创建目标对话框
  - 点击"新建目标"按钮（有目标时）
  - 点击"创建目标"按钮（无目标时）
- **操作6**: 填写目标信息（手动创建）
  - 输入目标名称
  - 选择目标类别（健康/学习/项目）
  - 选择开始日期
    - 手动输入日期
    - 点击"今天"快捷按钮
    - 点击"明天"快捷按钮
    - 点击"本周一"快捷按钮
    - 点击"下周一"快捷按钮
  - 选择结束日期（必填）
    - 手动输入日期
    - 点击"+7天"快捷按钮
    - 点击"+30天"快捷按钮
    - 点击"+90天"快捷按钮
  - 切换"使用模板"开关
- **操作7**: 使用模板创建目标
  - 勾选"使用模板"复选框
    - 勾选时：自动展开模板预览，自动填充开始日期（如果为空）
    - 取消勾选时：恢复手动创建模式
  - 选择模板类别（健康/学习/项目）
    - 切换类别时：自动更新模板预览，重置编辑的模板行动
  - 展开/折叠模板预览
    - 点击展开/折叠按钮
  - 编辑模板行动
    - 修改行动标题模板
    - 修改行动定义
    - 修改预计时间
  - 设置行动数量
    - 手动输入数量（1-100）
    - 点击快捷数量按钮（7/14/21/30）
  - 填写开始日期和结束日期（必填）
- **操作8**: 提交创建目标
  - 点击"创建"按钮（手动创建）
  - 点击"创建"按钮（模板创建）
  - 点击"取消"按钮
- **操作9**: 处理创建结果
  - 创建成功：显示成功提示，自动打开阶段对话框（手动创建）
  - 创建成功：显示成功提示，自动打开行动对话框（模板创建但无行动）
  - 创建失败：显示错误提示
  - 冲突错误：当前目标正在进行中

### 3.4 创建阶段操作
- **操作10**: 打开创建阶段对话框
  - 点击目标下的"创建阶段"按钮
  - 手动创建目标后自动打开
- **操作11**: 填写阶段信息
  - 输入阶段名称
  - 输入阶段描述（可选）
- **操作12**: 提交创建阶段
  - 点击"创建"按钮
  - 点击"取消"按钮
- **操作13**: 处理创建结果
  - 创建成功：显示成功提示，自动打开行动对话框（如果目标没有行动）
  - 创建失败：显示错误提示

### 3.5 创建行动操作
- **操作14**: 打开创建行动对话框
  - 点击阶段下的"创建行动"按钮
  - 手动创建目标/阶段后自动打开
- **操作15**: 选择创建模式
  - 切换到单个创建模式
  - 切换到批量创建模式（切换开关）
    - 切换时：清空另一个模式的输入数据
- **操作16**: 单个创建行动
  - 输入行动标题
  - 输入行动定义
  - 输入预计时间（可选）
  - 点击"创建"按钮
- **操作17**: 批量创建行动
  - 输入标题模板
  - 输入行动定义
  - 输入预计时间（可选）
  - 输入数量（1-1000）
  - 点击"创建"按钮
- **操作18**: 处理创建结果
  - 单个创建成功：显示成功提示
  - 批量创建成功：显示创建数量
  - 创建失败：显示错误提示
  - 冲突错误：当前目标正在进行中

### 3.6 设置当前目标操作
- **操作19**: 点击"设为当前目标"按钮
  - 目标未完成时
  - 目标已完成时（按钮禁用）
- **操作20**: 处理设置结果
  - 设置成功：显示成功提示，跳转到 `/today`
  - 设置失败：显示错误提示
  - 冲突错误：当前目标正在进行中

### 3.7 删除操作
- **操作21**: 删除目标
  - 点击目标旁的删除按钮
  - 确认删除对话框
  - 取消删除
- **操作22**: 删除阶段
  - 点击阶段旁的删除按钮
  - 确认删除对话框
  - 取消删除
- **操作23**: 删除行动
  - 点击行动旁的删除按钮
  - 确认删除对话框
  - 取消删除
- **操作24**: 处理删除结果
  - 删除成功：显示成功提示
  - 删除失败：显示错误提示

## 四、今日行动页面操作 (`/today`)

### 4.1 页面访问
- **操作1**: 访问今日行动页面
  - 有当前行动且今天未完成
  - 有当前行动且今天已完成
  - 无当前行动（目标已完成或未设置）
  - 无任何目标（新用户）
  - 目标需要创建阶段
  - 目标需要创建行动

### 4.2 查看行动信息
- **操作2**: 查看当前行动
  - 查看行动标题
  - 查看行动定义
  - 查看预计时间
  - 查看目标信息
  - 查看目标进度
  - 查看剩余行动数
  - 查看连续完成天数

### 4.3 完成行动操作
- **操作3**: 打开完成对话框
  - 点击"完成"按钮
- **操作4**: 填写完成反馈
  - 选择难度（1-5）
  - 选择精力（1-5）
- **操作5**: 提交完成
  - 点击"提交"按钮
  - 点击"取消"按钮
- **操作6**: 处理完成结果
  - 完成成功（有下一个行动）：显示成功提示，跳转到 `/dashboard`
  - 完成成功（目标完成）：显示成功提示，跳转到 `/goal-complete`
  - 完成失败：显示错误提示
  - 冲突错误：今天已完成行动
  - 冲突错误：行动已完成

### 4.4 标记未完成操作
- **操作7**: 点击"标记为未完成"按钮
- **操作8**: 处理标记结果
  - 标记成功：显示成功提示，跳转到 `/dashboard`
  - 标记失败：显示错误提示
  - 冲突错误：行动已完成

### 4.5 导航操作
- **操作9**: 点击"返回规划页"按钮
  - 跳转到 `/goals`
- **操作10**: 点击"创建第一个目标"按钮（新用户）
  - 跳转到 `/goals`
- **操作11**: 点击"去创建阶段和行动"按钮（需要阶段）
  - 跳转到 `/goals`
- **操作12**: 点击"去创建行动"按钮（需要行动）
  - 跳转到 `/goals`
- **操作13**: 点击"查看统计"按钮（今天已完成）
  - 跳转到 `/dashboard`
- **操作14**: 点击"目标规划"按钮（今天已完成）
  - 跳转到 `/goals`

## 五、复盘看板页面操作 (`/dashboard`)

### 5.1 页面访问
- **操作1**: 访问复盘看板页面
  - 有目标数据
  - 无目标数据

### 5.2 查看统计数据
- **操作2**: 查看今日完成状态
  - 今日已完成（绿色）
  - 今日待完成（橙色）
- **操作3**: 查看连续完成天数
  - 有连续完成记录
  - 无连续完成记录
- **操作4**: 查看目标进度
  - 有进度数据
  - 无进度数据
- **操作5**: 查看最近30天完成趋势
  - 有完成数据
  - 无完成数据
  - 切换图表类型（简化视图/Recharts图表）
- **操作6**: 查看难度趋势
  - 有难度数据
  - 无难度数据
  - 切换图表类型
    - 选择"折线图"
    - 选择"面积图"
    - 选择"柱状图"
- **操作7**: 查看精力趋势
  - 有精力数据
  - 无精力数据
  - 切换图表类型
    - 选择"折线图"
    - 选择"面积图"
    - 选择"柱状图"

### 5.3 导航操作
- **操作8**: 点击"开始今日行动"按钮（今日未完成）
  - 跳转到 `/today`
- **操作9**: 点击"去完成今日行动"按钮（多个位置）
  - 跳转到 `/today`
- **操作10**: 点击"前往规划"按钮（无目标时）
  - 跳转到 `/goals`

## 六、目标完成庆祝页面操作 (`/goal-complete`)

### 6.1 页面访问
- **操作1**: 访问目标完成庆祝页面
  - 目标刚完成
  - 已完成目标的历史访问

### 6.2 查看完成统计
- **操作2**: 查看目标信息
  - 目标名称
  - 目标类别
  - 完成日期
- **操作3**: 查看完成统计
  - 总行动数
  - 已完成行动数
  - 连续完成天数

### 6.3 导航操作
- **操作4**: 点击"创建新目标"按钮
  - 跳转到 `/goals`
- **操作5**: 点击"查看完成统计"按钮
  - 跳转到 `/dashboard`

## 七、导航栏操作

### 7.1 桌面端导航
- **操作1**: 点击"今日"按钮
  - 跳转到 `/today`
- **操作2**: 点击"规划"按钮
  - 跳转到 `/goals`
- **操作3**: 点击"复盘"按钮
  - 跳转到 `/dashboard`

### 7.2 移动端导航
- **操作4**: 打开移动端菜单
  - 点击菜单图标
- **操作5**: 关闭移动端菜单
  - 点击关闭图标
  - 点击导航项后自动关闭
- **操作6**: 点击导航项
  - 点击"今日"
  - 点击"规划"
  - 点击"复盘"

## 八、边界情况和异常操作

### 8.1 并发操作
- **操作1**: 同时打开多个标签页
  - 两个标签页同时完成同一个行动
  - 两个标签页同时设置当前目标
  - 两个标签页同时删除同一个目标
- **操作2**: 快速连续点击
  - 快速连续点击"完成"按钮
  - 快速连续点击"创建"按钮
  - 快速连续点击"删除"按钮

### 8.2 网络异常
- **操作3**: 网络断开时操作
  - 创建目标时网络断开
  - 完成行动时网络断开
  - 删除操作时网络断开
- **操作4**: 网络恢复后操作
  - 重试失败的操作
  - 刷新页面

### 8.3 数据异常
- **操作5**: 访问不存在的数据
  - 访问已删除的目标
  - 访问已删除的行动
- **操作6**: 操作已完成的数据
  - 完成已完成的行动
  - 设置已完成的目标为当前目标
  - 删除已完成的目标

### 8.4 表单验证
- **操作7**: 提交空表单
  - 创建目标时提交空名称
  - 创建阶段时提交空名称
  - 创建行动时提交空标题
- **操作8**: 提交无效数据
  - 提交无效日期格式
  - 提交超出范围的数值
  - 提交无效邮箱格式

### 8.5 状态不一致
- **操作9**: 刷新页面
  - 完成行动后刷新
  - 创建目标后刷新
  - 删除操作后刷新
- **操作10**: 浏览器前进/后退
  - 使用浏览器前进按钮
  - 使用浏览器后退按钮

## 九、数据输入操作

### 9.1 文本输入
- **操作1**: 输入目标名称
  - 正常输入
  - 输入超长文本
  - 输入特殊字符
  - 输入空值
- **操作2**: 输入阶段名称
  - 正常输入
  - 输入超长文本
  - 输入特殊字符
  - 输入空值
- **操作3**: 输入行动标题
  - 正常输入
  - 输入超长文本
  - 输入特殊字符
  - 输入空值
- **操作4**: 输入行动定义
  - 正常输入
  - 输入超长文本
  - 输入Markdown格式
  - 输入空值

### 9.2 日期选择
- **操作5**: 选择开始日期
  - 手动输入日期
  - 使用快捷按钮
  - 选择过去日期
  - 选择未来日期
  - 选择今天
- **操作6**: 选择结束日期
  - 手动输入日期
  - 使用快捷按钮
  - 选择早于开始日期的日期（应被拒绝）
  - 选择等于开始日期的日期
  - 选择晚于开始日期的日期

### 9.3 数值输入
- **操作7**: 输入行动数量
  - 输入有效数值（1-100）
  - 输入无效数值（<1 或 >100）
  - 输入非数字
  - 输入空值
- **操作8**: 输入批量创建数量
  - 输入有效数值（1-1000）
  - 输入无效数值（<1 或 >1000）
  - 输入非数字
  - 输入空值
- **操作9**: 输入预计时间
  - 输入有效数值
  - 输入无效数值
  - 输入非数字
  - 输入空值

### 9.4 选择操作
- **操作10**: 选择目标类别
  - 选择"健康"
  - 选择"学习"
  - 选择"项目"
- **操作11**: 选择难度
  - 选择1-5的任意值
- **操作12**: 选择精力
  - 选择1-5的任意值

## 十、对话框操作

### 10.1 打开对话框
- **操作1**: 打开创建目标对话框
- **操作2**: 打开创建阶段对话框
- **操作3**: 打开创建行动对话框
- **操作4**: 打开完成行动对话框
- **操作5**: 打开删除确认对话框

### 10.2 关闭对话框
- **操作6**: 点击"取消"按钮
- **操作7**: 点击对话框外部区域（如果支持）
- **操作8**: 按ESC键（如果支持）

### 10.3 对话框内操作
- **操作9**: 切换对话框内的选项
  - 切换"使用模板"开关
  - 切换"批量创建"开关
  - 展开/折叠模板预览
- **操作10**: 在对话框内编辑数据
  - 编辑模板行动
  - 修改表单字段

## 十一、状态切换操作

### 11.1 展开/折叠操作
- **操作1**: 展开/折叠目标
- **操作2**: 展开/折叠阶段
- **操作3**: 展开/折叠模板预览

### 11.2 模式切换操作
- **操作4**: 切换登录/注册模式
- **操作5**: 切换单个/批量创建模式
- **操作6**: 切换图表类型

## 十二、交互式操作

### 12.1 图表交互
- **操作1**: 悬停图表元素
  - 悬停完成趋势条形图
  - 悬停难度趋势图表
  - 悬停精力趋势图表
- **操作2**: 查看图表提示信息
  - 查看日期和完成状态
  - 查看难度值
  - 查看精力值

### 12.2 卡片交互
- **操作3**: 点击卡片
  - 点击首页的快速导航卡片
  - 点击目标卡片（展开/折叠）

## 十三、页面刷新和导航

### 12.1 页面刷新
- **操作1**: 手动刷新页面（F5/Ctrl+R）
- **操作2**: 硬刷新页面（Ctrl+Shift+R）
- **操作3**: 操作后自动刷新（router.refresh()）

### 12.2 页面导航
- **操作4**: 使用导航栏跳转
- **操作5**: 使用按钮跳转
- **操作6**: 使用浏览器前进/后退
- **操作7**: 直接输入URL访问

## 十四、需要检查的逻辑点

### 13.1 创建操作
- ✅ 创建目标时的冲突检查（当前目标正在进行中）
- ✅ 创建阶段时的冲突检查
- ✅ 创建行动时的冲突检查（当前目标正在进行中）
- ✅ 表单验证（必填字段、格式验证、范围验证）
- ✅ 创建成功后的状态更新和导航

### 13.2 完成操作
- ✅ 完成行动时的"每日唯一行动"约束
- ✅ 完成行动时的"已完成行动不可重复完成"约束
- ✅ 完成行动后的自动推进逻辑
- ✅ 目标完成检测
- ✅ 完成成功后的导航

### 13.3 删除操作
- ✅ 删除目标时的状态清理
- ✅ 删除阶段时的状态清理
- ✅ 删除行动时的状态清理
- ✅ 删除确认对话框

### 13.4 设置操作
- ✅ 设置当前目标时的冲突检查
- ✅ 设置当前目标时找到第一个未完成的行动
- ✅ 设置成功后的导航

### 13.5 数据展示
- ✅ 今天未完成时的数据显示
- ✅ 今天已完成时的数据显示
- ✅ 无数据时的空状态显示
- ✅ 数据异常时的错误处理

### 13.6 并发和异常
- ✅ 并发完成操作的防护
- ✅ 网络异常时的错误处理
- ✅ 数据不存在时的错误处理
- ✅ 状态不一致时的处理

## 十五、总结

所有用户操作已全面列出，包括：
- **15个主要操作类别**
- **120+个具体操作**
- **6个逻辑检查类别**

每个操作都应该有对应的：
1. 前端验证
2. 后端验证
3. 错误处理
4. 用户反馈
5. 状态更新
6. 导航逻辑

所有操作都应该遵循"每日唯一行动"的核心设计原则。

